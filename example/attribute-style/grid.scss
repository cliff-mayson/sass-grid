@import "../../src/base";

$grid_prefix: "g-" !default;

@function grid-attr($breakpoint) {
	@return "#{$grid_prefix}#{$breakpoint}";
}

// ======= Grid styles =======

@mixin attribute-grid($breakpoint) {
	$attr: grid-attr($breakpoint);

	// ------ Horizontal alignment -------

	.grid__unit[#{$attr}~="halign:left"] {
		@include grid--halign-left();
	}

	//fixme: what if it was centered and reveresed at diffrent breakpoints? this won't work - need to iterate each breakpoint with each breakpoint?
	.grid__unit[#{$attr}~="halign:left"].grid__unit[#{$attr}~="order:reversed"] {
		@include grid--halign-left(true);
	}

	.grid__unit[#{$attr}~="halign:center"] {
		@include grid--halign-center();
	}

	.grid__unit[#{$attr}~="halign:right"] {
		@include grid--halign-right();
	}

	.row-#{$breakpoint}-reversed.row-#{$breakpoint}-right { //fixme: what if it was centered and reveresed at diffrent breakpoints? this won't work - need to iterate each breakpoint with each breakpoint?
		@include grid--halign-right(true);
	}

	.row-#{$breakpoint}-justify {
		@include grid--halign-justify();
	}

	.row-#{$breakpoint}-justify-center {
		@include grid--halign-justify-center();
	}

	// ------ Ordering -------

	.row-#{$breakpoint}-reversed {
		@include grid--order-reverse();
	}

}

// ======= Grid Unit =======

@mixin attribute-grid-unit($breakpoint) {

	// ------ Columns -------

	@for $i from 1 through $grid_columns {

		.col-#{$breakpoint}-#{$i} {
			@include grid__unit();
			@include grid__unit--cols($i);
		}

	}

	// ------ Visibility -------

	.grid__unit[#{grid-attr($breakpoint)}~="visible"] {
		@include grid__unit--visible();
	}

	.grid__unit[#{grid-attr($breakpoint)}~="invisible"] {
		@include grid__unit--invisible();
	}

	// ------ Ordering -------

	.grid__unit[#{grid-attr($breakpoint)}~="order:first"] {
		@include grid__unit--order-first();
	}

	.grid__unit[#{grid-attr($breakpoint)}~="order:last"] {
		@include grid__unit--order-last();
	}

}

.grid {
	@include grid();
}

.grid__unit {
	@include grid__unit();
}

//repeat styles for each breakpoint
@each $breakpoint, $px in $named_breakpoints {
	@include named_breakpoint($breakpoint) {
		@include attribute-grid($breakpoint);
		@include attribute-grid-unit($breakpoint);
	}
}